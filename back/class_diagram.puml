@startuml
' Set direction
left to right direction

' Define Pydantic Models as classes
class CompanyPortfolioItem {
  +name: str
  +ticker: str
}

class DiscrepancySource {
  +title: str
  +url: str
  +snippet: str
}

class DiscrepancyRisk {
  +score: float
  +explanation: str
  +contradiction_found: bool
}

class CompanyAnalysis {
  +ticker: str
  +company_name: str
  +financial_data: Dict
  +discrepancy_risk: DiscrepancyRisk
  +sources: List<DiscrepancySource>
}

' Define FastAPI App as a component
class FastAPI_App <<FastAPI>> {
  ' Helper functions
  - load_data(file_path: str): Dict
  - extract_name_n_ticker(data: Dict): List<CompanyPortfolioItem>
  - get_mock_llm_analysis(claim: str, evidence: List): DiscrepancyRisk

  ' Endpoint handler methods
  + read_root()
  + get_portfolio()
  + get_company_analysis(ticker: str)
}

' Define relationships
CompanyAnalysis "1" *-- "1" DiscrepancyRisk : contains
CompanyAnalysis "1" *-- "0..*" DiscrepancySource : contains

FastAPI_App ..> CompanyAnalysis : "responds with"
FastAPI_App ..> CompanyPortfolioItem : "responds with"


' Note about the data source and endpoints
note right of FastAPI_App
  Data is loaded from `data.json`.

  **Endpoints:**
  - `GET /` -> read_root()
  - `GET /api/portfolio` -> get_portfolio()
  - `GET /api/company/{ticker}` -> get_company_analysis()
end note

@enduml
